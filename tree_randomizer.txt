-- manage trees en-masse in your scene
-- ver 0.9

oHeight = $[1].height
tStats = #(oHeight)
if tStats[1] == undefined do tStats[1] = oHeight
		
rollout treemanager "3m" width:99 height:294
(
	local targetObj = #()
	label lbl1 "tree manager" pos:[15,7] width:67 height:17
	button btn_seed "seed" pos:[24,65] width:49 height:19 toolTip:"random seed"
	button btn_unique "make unique" pos:[8,28] width:82 height:26 toolTip:"make all trees unique"
	pickbutton btn_i_src "instance source" pos:[6,98] width:86 height:21 toolTip:"mother tree"
	button btn_i_exe "re-instance" pos:[10,122] width:79 height:26 toolTip:"re-instance selected trees"
	button btn_height "random height" pos:[4,235] width:91 height:29 toolTip:"random tree height based on initial height"
	label lbl6 "ver 0.9" pos:[29,274] width:41 height:14
	button btn_density "density" pos:[9,206] width:80 height:23 enabled:true toolTip:"random density"
	button btn_rot "rotate" pos:[26,177] width:50 height:23
	on btn_seed pressed do
	(
	for n = 1 to selection.count do selection[n].seed = random 1 1000000
	)
	on btn_unique pressed do
	(
	instancemgr.makeobjectsunique $ #individual
	)
	on btn_i_src picked sourceObj do
	(	
	btn_i_src.text = sourceObj.name
	select sourceObj
	targetObj[1] = sourceObj
	)
	on btn_i_exe pressed do
	(
	for o in selection where classof o == foliage do o.baseobject = targetObj[1].baseobject
	)
	on btn_height pressed do
	(
	for n = 1 to selection.count do selection[n].height = random (tStats[1] / 2.0) (tStats[1] * 1.5)
		print (oHeight)
	)
	on btn_density pressed do
	(
	for n = 1 to selection.count do selection[n].density = random 0.0 1.0
	)
	on btn_rot pressed  do
	(
	for n = 1 to selection.count do rotate selection[n] (eulerangles 0 0 (random 0 (2*n)))
	)
)
createdialog treemanager
